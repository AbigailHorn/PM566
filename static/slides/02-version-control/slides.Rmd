---
title: "Version control and reproducible research"
subtitle: "PM 566: Introduction to Health Data Science"
author: "George G. Vega Yon"
output: slidy_presentation
  # xaringan::moon_reader:
  #   css: ["theme.css"]
  #   lib_dir: libs
  #   nature:
  #     beforeInit: "macros.js"
  #     ratio: "16:9"
  #     highlightStyle: github
  #     highlightLines: false
  #     countIncrementalSlides: false
  #     titleSlideClass: [center, middle]
  #   code_download: true
---

# What is version control


<div style="text-align: center;">
  <table>
    <col width="40%">
    <col width="40%">
    <tr>
      <td style="text-align: left;">
      [I]s the <strong>management of changes</strong> to documents [...] <strong>Changes are usually identified</strong> by a number or letter code, termed the "revision number", "revision level", or simply "revision". For example, an initial set of files is "revision 1". When the first change is made, the resulting set is "revision 2", and so on. <strong>Each revision is associated with a timestamp and the person making the change</strong>. Revisions can be <strong>compared</strong>, <strong>restored</strong>, and with some types of files, <strong>merged</strong>. -- <a href="https://en.wikipedia.org/w/index.php?title=Version_control&oldid=948839536" target="_blank">Wiki</a>
      </td>
      <td>
        <img src="git-wiki.svg" alt="Diagram of version control" width="35%">
      </td>
    </tr>
  </table>
</div>



---

# Why do we care

Have you ever:

- Made a **change to code**, realised it was a **mistake** and wanted to **revert** back?

- **Lost code** or had a backup that was too old?

- Had to **maintain multiple versions** of a product?

- Wanted to see the **difference between** two (or more) **versions** of your code?

- Wanted to prove that a particular **change broke or fixed** a piece of code?

- Wanted to **review the history** of some code?

---

# Why do we care (cont'd)

- Wanted to submit a **change** to **someone else's code**?

- Wanted to **share your code**, or let other people work on your code?

- Wanted to see **how much work** is being done, and where, when and by whom?

- Wanted to **experiment** with a new feature **without interfering** with working code?

In these cases, and no doubt others, a version control system should make your life easier.

-- [Stackoverflow](https://stackoverflow.com/a/1408464/2097171) (by [si618](https://stackoverflow.com/users/44540/si618))

---

# Git: The stupid content tracker

<div style="text-align: center;">
  <span>
  <a hreg="https://commons.wikimedia.org/wiki/File:Git-logo.svg" target="_blank">
    <img style="width: 200px;vertical-align: middle;" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Git-logo.svg/500px-Git-logo.svg.png" alt="Git logo">
  </a>
  <a href="https://commons.wikimedia.org/wiki/File:LinuxCon_Europe_Linus_Torvalds_03_(cropped).jpg" target="_blank">
    <img style="width: 200px;vertical-align: middle;" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/LinuxCon_Europe_Linus_Torvalds_03_%28cropped%29.jpg/345px-LinuxCon_Europe_Linus_Torvalds_03_%28cropped%29.jpg" alt="Linus Torvalds">
  </a>
  </span><br>
  <span>
    <a href="https://commons.wikimedia.org/wiki/File:Git-logo.svg" target="_blank">Git logo</a> and
    <a href="https://en.wikipedia.org/wiki/Linus_Torvalds" target="_blank">Linus Torvalds (creator of git)</a>
  </span>
</div>

- During this class (and perhaps, the entire program) we will be using <a href="https://git-scm.com" target="_blank">Git</a>

- Git is used by <a href="https://insights.stackoverflow.com/survey/2018#work-_-version-control" target="_blank">most developers in the world</a>.

- A great reference about the tool can be found [here](https://git-scm.com/book)

- More on what's stupid about git <a href="https://en.wikipedia.org/wiki/Git#Naming" target="_blank">here</a>.

---

# How can I use Git

There are sevearl ways to include Git in your work-pipeline. A few are:

- Through command line

- Through one of the available Git GUIs:

  - RStudio [(link)](https://rstudio.com/products/rstudio/features/)
  
  - Git-Cola [(link)](https://git-cola.github.io/)
  
  - Github Desktop [(Link)](https://desktop.github.com/)

More alternatives [here](https://git-scm.com/download/gui).

---

# Hands on: Introduce yourself

Set up your git install with git confing


```ssh
$ git config --global user.name "Juan Perez"
$ git config --global user.email "jperez@treschanchitos.edu"
```

Try it yourself (5 minutes) (more on how to configure git <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration" target="_blank">here</a>)

---

# Hands on: Create a local project

Today we will:

1. `mkdir`: Create a new folder.

1. `git init`: Initialize a local git project.

2. Create the (plain text) files <a href="https://en.wikipedia.org/wiki/README">README.md</a> and <a href="https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository#_ignoring" target="_blank">.gitignore</a> (and an example <a href="#(9)" target="_blank">here</a>).

3. `git add`: Start tracking both files.

4. `git status`: Check what's going on

5. Creating a new repository on Github

5. `git remote add`: Adding a remote repository

6. `git push`: Uploading the changes to the repository

Note 1: We are assuming that you already [installed git in your system](https://git-scm.com).

Note 2: Need a text editor? Checkout this website [link](https://alternativeto.net/software/vim/).

---

# Example for .gitignore {#gitignore}

Example exctracted directly from Pro-Git [(link)](https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository#_ignoring).

<div style="font-size: 12pt;">

```
# ignore all .a files
*.a

# but do track lib.a, even though you're ignoring .a files above
!lib.a

# only ignore the TODO file in the current directory, not subdir/TODO
/TODO

# ignore all files in any directory named build
build/

# ignore doc/notes.txt, but not doc/server/arch.txt
doc/*.txt

# ignore all .pdf files in the doc/ directory and any of its subdirectories
doc/**/*.pdf
```

</div>

---

# Resources

- Git's everyday commands, type `man giteveryday` in your terminal/command line.

- My personal choice for nightstand book: The Pro-git book (free online) [(link)](https://git-scm.com/book)

- Github's website of resources [(link)](https://try.github.io/)

- The "Happy Git with R" book [(link)][https://happygitwithr.com/]

- Roger Peng's Mastering Software Development Book Section 3.9 Version control and Github [(link)](https://bookdown.org/rdpeng/RProgDA/version-control-and-github.html)
